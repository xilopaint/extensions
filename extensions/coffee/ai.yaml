instructions: |
  Help users manage their Mac's sleep prevention (caffeination).

  Before performing any action, check the current status with check-caffeination-status.

  Tool selection guide:
  - User wants indefinite caffeination → use caffeinate
  - User specifies a duration (hours/minutes) → use caffeinate-for
  - User wants to caffeinate while an app runs → use caffeinate-while-app-is-running
  - User wants to set up recurring schedules → use schedule-caffeination
  - User wants to stop caffeination → use decaffeinate (note: won't work if a schedule is actively running)

  When confirming actions, mention the specific duration or condition if applicable.
evals:
  - input: "@coffee keep my mac awake for 2 hours"
    mocks:
      check-caffeination-status:
        isCaffeinated: false
        isScheduled: false
      caffeinate-for:
        success: true
    expected:
      - callsTool:
          name: caffeinate-for
          arguments:
            hours: 2
      - meetsCriteria: Confirms the duration Mac will stay awake

  - input: "@coffee caffeinate while Zoom is running"
    mocks:
      check-caffeination-status:
        isCaffeinated: false
        isScheduled: false
      caffeinate-while-app-is-running:
        success: true
        application: Zoom
        processId: "12345"
    expected:
      - callsTool: check-caffeination-status
      - callsTool:
          name: caffeinate-while-app-is-running
          arguments:
            application:
              includes: zoom
      - meetsCriteria: Confirms that Mac will stay awake while Zoom is running

  - input: "@coffee stop keeping my mac awake"
    mocks:
      check-caffeination-status:
        isCaffeinated: true
        isScheduled: false
      decaffeinate:
        success: true
    expected:
      - callsTool: check-caffeination-status
      - callsTool: decaffeinate
      - meetsCriteria: Confirms that sleep prevention has been disabled

  - input: "@coffee is my mac preventing sleep?"
    mocks:
      check-caffeination-status:
        isCaffeinated: true
        isScheduled: false
    expected:
      - callsTool: check-caffeination-status
      - meetsCriteria: Clearly states whether the Mac is currently caffeinated or not

  - input: "@coffee schedule caffeination for weekdays from 09:00 to 17:00"
    mocks:
      check-caffeination-status:
        isCaffeinated: false
        isScheduled: false
      schedule-caffeination:
        success: true
        days:
          - monday
          - tuesday
          - wednesday
          - thursday
          - friday
    expected:
      - callsTool:
          name: schedule-caffeination
          arguments:
            schedule:
              includes: weekdays
      - meetsCriteria: Confirms the caffeination schedule was created

  - input: "@coffee prevent my mac from sleeping"
    mocks:
      check-caffeination-status:
        isCaffeinated: false
        isScheduled: false
      caffeinate:
        success: true
    expected:
      - callsTool: check-caffeination-status
      - callsTool: caffeinate
      - meetsCriteria: Confirms that Mac will stay awake
